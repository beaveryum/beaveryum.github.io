import{_ as a,c as l,a as s,b as p,t as o,d as e,o as t}from"./app.86428379.js";const d=JSON.parse('{"title":"그누보드 및 영카트 회원삭제관련","description":"","frontmatter":{"title":"그누보드 및 영카트 회원삭제관련"},"headers":[{"level":2,"title":"설명 :","slug":"설명","link":"#설명","children":[]}],"relativePath":"그누&영카트/그누보드 및 영카트 회원삭제관련.md","lastUpdated":1674745074000}'),c={name:"그누&영카트/그누보드 및 영카트 회원삭제관련.md"},D={id:"frontmatter-title",tabindex:"-1"},r=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),F=e(`<h2 id="설명" tabindex="-1">설명 : <a class="header-anchor" href="#설명" aria-hidden="true">#</a></h2><p>회원삭제했는데 삭제 안되는이유는</p><p>재가입을 방지하기 위해서 삭제가 안되고 대신에 탈퇴처리 하게만들어야한다.</p><p><a href="https://sir.kr/qa/267389" target="_blank" rel="noreferrer">https://sir.kr/qa/267389</a></p><p>관리자 모드를 아무리 봐도 회원목록 삭제하는 항목이 안보여서요..</p><p>회원아이디 앞에 있는 체크박스 체크후 &#39;선택삭제&#39;를 클릭해도 안없어지네요..</p><p>회원관리에서 회원 완전히 삭제하기</p><p><a href="http://gnustudy.com/bbs/board.php?bo_table=gnu_tip&amp;wr_id=104" target="_blank" rel="noreferrer">http://gnustudy.com/bbs/board.php?bo_table=gnu_tip&amp;wr_id=104</a></p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//회원삭제</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//http://gnustudy.com/bbs/board.php?bo_table=gnu_tip&amp;wr_id=104</span></span>
<span class="line"><span style="color:#82AAFF;">functionmember_delete</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#C792EA;">global</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">global</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectmb_name,mb_nick,mb_ip,mb_recommend,mb_memo,mb_levelfrom</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">member_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">wheremb_id=&#39;</span><span style="color:#89DDFF;">&quot;.</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">.&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sql_fetch</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">sql</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//이미삭제된회원은제외</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//if(preg_match(&#39;#^[0-9]{8}.*삭제함#&#39;,$mb[&#39;mb_memo&#39;]))</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//return;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">mb</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mb_recommend</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]){</span></span>
<span class="line"><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">row</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">sql_fetch</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selectcount(*)ascntfrom</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">member_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">wheremb_id=&#39;</span><span style="color:#89DDFF;">&quot;.</span><span style="color:#82AAFF;">addslashes</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">mb</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mb_recommend</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span><span style="color:#89DDFF;">.&quot;</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">row</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cnt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#82AAFF;">insert_point</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">mb</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mb_recommend</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">],$</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cf_recommend_point</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]*(-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">),$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">.&#39;</span><span style="color:#C3E88D;">님의회원자료삭제로인한추천인포인트반환</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@member</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,$</span><span style="color:#A6ACCD;">mb</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mb_recommend</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">],$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">.&#39;</span><span style="color:#C3E88D;">추천인삭제</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//회원자료는정보만없앤후아이디는보관하여다른사람이사용하지못하도록함:061025</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//$sql=&quot;update{$g5[&#39;member_table&#39;]}setmb_password=&#39;&#39;,mb_level=1,mb_email=&#39;&#39;,mb_homepage=&#39;&#39;,mb_tel=&#39;&#39;,mb_hp=&#39;&#39;,mb_zip1=&#39;&#39;,mb_zip2=&#39;&#39;,mb_addr1=&#39;&#39;,mb_addr2=&#39;&#39;,mb_birth=&#39;&#39;,mb_sex=&#39;&#39;,mb_signature=&#39;&#39;,mb_memo=&#39;&quot;.date(&#39;Ymd&#39;,G5_SERVER_TIME).&quot;삭제함\\n{$mb[&#39;mb_memo&#39;]}&#39;wheremb_id=&#39;{$mb_id}&#39;&quot;;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//sql_query($sql);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//회원삭제20190930원래는삭제가안되는데삭제하게만듦</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*글쓰기하셔도회원목록에서삭제가안되고탈퇴회원으로처리가되요</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*이유는재가입방지(이전아이디글슬경우)기타등등문제사유가되기때문에</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*탈퇴회원으로처리되지삭제하려면따로작업하셔야합니다.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#82AAFF;">sql_query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">update</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">member_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">setmb_leave_date=now()wheremb_id=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//포인트테이블에서삭제</span></span>
<span class="line"><span style="color:#82AAFF;">sql_query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deletefrom</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">point_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">wheremb_id=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//그룹접근가능삭제</span></span>
<span class="line"><span style="color:#82AAFF;">sql_query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deletefrom</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">group_member_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">wheremb_id=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//쪽지삭제</span></span>
<span class="line"><span style="color:#82AAFF;">sql_query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deletefrom</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">memo_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">whereme_recv_mb_id=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;orme_send_mb_id=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//스크랩삭제</span></span>
<span class="line"><span style="color:#82AAFF;">sql_query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deletefrom</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">scrap_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">wheremb_id=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//관리권한삭제</span></span>
<span class="line"><span style="color:#82AAFF;">sql_query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">deletefrom</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">auth_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">wheremb_id=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//그룹관리자인경우그룹관리자를공백으로</span></span>
<span class="line"><span style="color:#82AAFF;">sql_query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">update</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">group_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">setgr_admin=&#39;&#39;wheregr_admin=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//게시판관리자인경우게시판관리자를공백으로</span></span>
<span class="line"><span style="color:#82AAFF;">sql_query</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">update</span><span style="color:#89DDFF;">{$</span><span style="color:#A6ACCD;">g5</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">board_table</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">setbo_admin=&#39;&#39;wherebo_admin=&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//소셜로그인에서삭제또는해제</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">function_exists</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">social_member_link_delete</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)){</span></span>
<span class="line"><span style="color:#82AAFF;">social_member_link_delete</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//아이콘삭제</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">unlink</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">G5_DATA_PATH</span><span style="color:#89DDFF;">.&#39;/</span><span style="color:#C3E88D;">member</span><span style="color:#89DDFF;">/&#39;.</span><span style="color:#82AAFF;">substr</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;">.&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;.</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">.&#39;</span><span style="color:#C3E88D;">.gif</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//프로필이미지삭제</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">unlink</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">G5_DATA_PATH</span><span style="color:#89DDFF;">.&#39;/</span><span style="color:#C3E88D;">member_image</span><span style="color:#89DDFF;">/&#39;.</span><span style="color:#82AAFF;">substr</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;">.&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;.</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">mb_id</span><span style="color:#89DDFF;">.&#39;</span><span style="color:#C3E88D;">.gif</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,9);function y(n,i,C,_,A,m){return t(),l("div",null,[s("h1",D,[p(o(n.$frontmatter.title)+" ",1),r]),F])}const E=a(c,[["render",y]]);export{d as __pageData,E as default};
