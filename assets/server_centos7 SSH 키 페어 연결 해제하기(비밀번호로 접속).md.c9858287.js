import{_ as n,c as l,a as s,b as p,t as o,d as e,o as t}from"./app.ff46b2ef.js";const g=JSON.parse('{"title":"centos7 SSH 키 페어 연결 해제하기(비밀번호로 접속)","description":"","frontmatter":{"title":"centos7 SSH 키 페어 연결 해제하기(비밀번호로 접속)"},"headers":[],"relativePath":"server/centos7 SSH 키 페어 연결 해제하기(비밀번호로 접속).md","lastUpdated":null}'),c={name:"server/centos7 SSH 키 페어 연결 해제하기(비밀번호로 접속).md"},r={id:"frontmatter-title",tabindex:"-1"},C=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),y=e(`<p>현재 centos7 기준으로 설명 한다.</p><p>ssh 가 있는지 체크한다.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">rpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-qa</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openssh-server</span></span>
<span class="line"></span></code></pre></div><p>없으면 설치한다.</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">openssh-server</span></span>
<span class="line"></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/ssh/sshd_config</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">:</span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nu</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Port</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">22</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2222</span></span>
<span class="line"><span style="color:#FFCB6B;">PermiRootLogin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yes</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">루트로그인</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">접근</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">하지</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">못하게~</span></span>
<span class="line"><span style="color:#FFCB6B;">PermitEmptyPasswords</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Passwrod가</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">없는</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">계정으로</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SSH</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">로그인이</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">불가능</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">하도록</span></span>
<span class="line"><span style="color:#FFCB6B;">MaxAuthTries</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">루트로</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">6번이상</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">시도</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">실패시</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">차단</span></span>
<span class="line"><span style="color:#A6ACCD;">UseDNS</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">yes</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> no : 접속 지연 현상 문제 해결 됨</span></span>
<span class="line"><span style="color:#FFCB6B;">PasswordAuthentication</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">비밀번호</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">허용해서</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">접근하게</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sshd</span></span>
<span class="line"></span></code></pre></div><p>방화벽 확인하기</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--list-port</span></span>
<span class="line"></span></code></pre></div><p>없으면 방화벽 추가하기</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--zone=public</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-port=2222/tcp</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--reload</span></span>
<span class="line"></span></code></pre></div><p>만약에 selinux 설치 되어 있지 않다면..</p><p>최소 설치를 하면 &quot;semanage&quot; 명령어가 실행되지 않는데 (아마존서버에선 존재 해서 패스)</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">policycoreutils-python</span></span>
<span class="line"></span></code></pre></div><p>selinux 포트 확인하기</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">semanage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-l</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">포트번호</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><p>없으면 포트 추가하기</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">semanage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ssh_port_t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tcp</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2222</span></span>
<span class="line"></span></code></pre></div><p>포트 확인하기</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">netstat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-an</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">2222</span></span>
<span class="line"></span></code></pre></div><p>그리고 더 중요한게 서버 외부 인스턴스 방화벽에 보면 새로 바뀐 포트를 입력해줍니다.</p>`,20);function D(a,A,i,d,F,E){return t(),l("div",null,[s("h1",r,[p(o(a.$frontmatter.title)+" ",1),C]),y])}const _=n(c,[["render",D]]);export{g as __pageData,_ as default};
